# FatGram 開発ワークフロー

このドキュメントでは、FatGramプロジェクトの開発ワークフローとプロセスについて説明します。

## 開発プロセスの概要

FatGramの開発プロセスは、フロントエンドとバックエンドチームが独立して作業できるよう設計されています。API契約を最初に定義し、モックサーバーを活用することで、各チームは独立して開発を進めることができます。

```
┌───────────────────────┐             ┌───────────────────────┐
│                       │             │                       │
│ 要件分析・仕様策定     │────────────▶│ API契約設計           │
│                       │             │                       │
└───────────────────────┘             └──────────┬────────────┘
                                                 │
                                                 ▼
                 ┌─────────────────────────────────────────────────┐
                 │                                                 │
                 │              モックAPIサーバー生成               │
                 │                                                 │
                 └───────────┬─────────────────────┬───────────────┘
                             │                     │
                             ▼                     ▼
┌───────────────────────┐             ┌───────────────────────┐
│                       │             │                       │
│ フロントエンド開発     │◀───────────▶│ バックエンド開発       │
│                       │             │                       │
└──────────┬────────────┘             └──────────┬────────────┘
           │                                      │
           ▼                                      ▼
┌───────────────────────┐             ┌───────────────────────┐
│                       │             │                       │
│ フロントエンドテスト   │             │ バックエンドテスト     │
│                       │             │                       │
└──────────┬────────────┘             └──────────┬────────────┘
           │                                      │
           └──────────────────┬──────────────────┘
                              │
                              ▼
                 ┌─────────────────────────────────┐
                 │                                 │
                 │          統合テスト              │
                 │                                 │
                 └──────────────┬──────────────────┘
                                │
                                ▼
                 ┌─────────────────────────────────┐
                 │                                 │
                 │            リリース              │
                 │                                 │
                 └─────────────────────────────────┘
```

## 開発フロー

### 1. 要件分析と仕様策定

- プロダクトオーナーによる要件定義
- ステークホルダーとの要件レビュー
- 技術的な実現可能性の評価
- ユーザーストーリーの作成と優先順位付け

### 2. API契約設計

- RESTful APIエンドポイントの定義
- リクエスト/レスポンスモデルの設計
- エラーハンドリングの規約策定
- OpenAPI/Swagger文書の作成

### 3. モックAPIサーバー生成

- OpenAPI仕様からモックサーバーを自動生成
- 開発環境でのモックサーバーデプロイ
- テストデータのセットアップ

### 4. 並行開発

#### フロントエンド開発

- UIコンポーネントの実装
- 状態管理とデータフロー
- APIクライアントの実装
- ユニットテストとウィジェットテスト

#### バックエンド開発

- APIエンドポイントの実装
- データベーススキーマの実装
- ビジネスロジックの実装
- ユニットテストと統合テスト

### 5. 統合とテスト

- フロントエンドとバックエンドの統合
- エンドツーエンドテスト
- パフォーマンステスト
- セキュリティテスト

### 6. リリース

- リリースブランチの作成
- バージョニングとリリースノート
- CI/CDパイプラインによるデプロイ
- リリース後のモニタリング

## 開発環境

### ローカル開発環境

各開発者は以下の環境を使用します：

1. **IDE**: Visual Studio Code（推奨）またはAndroid Studio
2. **Flutterバージョン管理**: fvm（Flutter Version Management）
3. **バックエンド開発**: Docker環境
4. **APIテスト**: Postman/Insomnia

### 開発環境

- **開発環境（Development）**: 継続的な開発とテスト用
- **ステージング環境（Staging）**: リリース前の検証用
- **本番環境（Production）**: エンドユーザー向け

## プルリクエスト（PR）フロー

1. 機能ブランチ (`feature/*`, `bugfix/*`) を `develop` から作成
2. 機能実装後、PRを作成
3. 自動CI/CDによるテストと静的解析
4. コードレビュー（最低1名のレビュアー）
5. レビュー承認後、`develop` にマージ
6. リリース準備時に `release/*` ブランチを作成
7. リリース準備完了後、`main` および `develop` にマージ

## コードレビュー基準

- 機能要件が満たされているか
- コード品質（可読性、メンテナンス性）
- パフォーマンスへの影響
- テストの網羅性（単体テスト、統合テスト）
- セキュリティ上の問題がないか
- プロジェクトの規約に準拠しているか

## コミュニケーションチャネル

- **毎日のスタンドアップ**: 進捗確認と障害の共有
- **週次レトロスペクティブ**: プロセス改善の議論
- **プロジェクト管理**: GitHub Projectsを使用
- **チャット**: Slackチャンネル
  - `#fatgram-general`: 一般的なディスカッション
  - `#fatgram-frontend`: フロントエンド開発
  - `#fatgram-backend`: バックエンド開発
  - `#fatgram-releases`: リリース関連

## 障害対応プロセス

1. 問題の特定と報告（バグトラッキング）
2. 優先度と影響度の評価
3. 修正担当者のアサイン
4. 修正の実装とテスト
5. コードレビューと承認
6. ホットフィックスまたは次期リリースへの組み込み

## 品質保証

- **自動化テスト**: ユニットテスト、統合テスト、E2Eテスト
- **コード品質**: 静的解析ツール（lint、SonarQube）
- **パフォーマンス**: ベンチマークとパフォーマンステスト
- **アクセシビリティ**: アクセシビリティ監査とテスト
- **セキュリティ**: 依存関係チェックと脆弱性スキャン

## モバイルアプリリリースプロセス

### Appleストアリリース

1. アプリビルド (--release フラグ付き)
2. TestFlightでのベータテスト
3. App Store Connectへのメタデータ更新
4. Appleによるレビュー
5. 公開またはフェーズドロールアウト

### Googleプレイリリース

1. アプリビルド (--release フラグ付き)
2. 内部テスト/オープンテスト
3. Play Consoleへのメタデータ更新
4. Googleによるレビュー
5. 公開またはフェーズドロールアウト